<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azadi Map - Iran Revolution Dashboard</title>
    <meta name="description" content="Live map of Iran protests with video documentation, flight tracking, and internet status.">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://azadimapproject.github.io/azadi-map/">
    <meta property="og:title" content="Azadi Map - Iran Revolution Dashboard">
    <meta property="og:description" content="Live map of Iran protests. Video locations, flight tracking, internet status.">
    <meta property="og:image" content="https://azadimapproject.github.io/azadi-map/preview.png">

    <!-- Twitter / X -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://azadimapproject.github.io/azadi-map/">
    <meta name="twitter:title" content="Azadi Map - Iran Revolution Dashboard">
    <meta name="twitter:description" content="Live map of Iran protests. Video locations, flight tracking, internet status.">
    <meta name="twitter:image" content="https://azadimapproject.github.io/azadi-map/preview.png">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Leaflet MarkerCluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Internet Status Indicator -->
    <div id="wifi-indicator" class="wifi-indicator disrupted">
        <a href="https://netblocks.org/iran" target="_blank" class="wifi-link" title="NetBlocks Iran - Click for live data">
            <div class="wifi-icon">
                <div class="wifi-bar bar1"></div>
                <div class="wifi-bar bar2"></div>
                <div class="wifi-bar bar3"></div>
                <div class="wifi-dot"></div>
            </div>
            <div class="wifi-status">
                <span class="wifi-label">Iran Internet</span>
                <span class="wifi-text">DISRUPTED</span>
            </div>
        </a>
    </div>

    <!-- Header -->
    <div id="header" class="header">
        <h1>Azadi Map</h1>
        <span class="header-subtitle">Iran Revolution Dashboard</span>
        <div class="header-stats">
            <div class="stat-box">
                <span class="stat-number" id="total-videos">0</span>
                <span class="stat-label">Videos</span>
            </div>
            <div class="stat-box">
                <span class="stat-number" id="total-locations">0</span>
                <span class="stat-label">Locations</span>
            </div>
        </div>
    </div>

    <div id="map"></div>

    <!-- Sidebar for video list -->
    <div id="sidebar" class="sidebar hidden">
        <div class="sidebar-header">
            <h2 id="sidebar-title">Videos</h2>
            <button id="sidebar-close">&times;</button>
        </div>
        <div id="video-list" class="video-list"></div>
    </div>

    <!-- Legend -->
    <div id="legend" class="legend">
        <div class="legend-title">Video Locations</div>
        <div class="legend-item"><span class="legend-dot" style="background: #2563eb;"></span> Protest footage</div>
        <div class="legend-item"><span class="legend-dot" style="background: #dc2626;"></span> Regime violence</div>
        <div class="legend-hint">Click marker for videos</div>
    </div>

    <!-- Filter panel -->
    <div id="filters" class="filters">
        <div class="filter-group violence-toggle">
            <label class="toggle-label">
                <input type="checkbox" id="filter-violence">
                <span class="toggle-text">Regime Violence Only</span>
            </label>
        </div>
        <div class="stats">
            <span id="stats-total">0 videos</span>
            <span id="stats-located">0 on map</span>
        </div>
    </div>

    <!-- Day filter -->
    <div id="day-filter" class="day-filter">
        <button class="day-btn active" data-day="all">All</button>
        <div id="day-buttons" class="day-buttons"></div>
    </div>

    <!-- Flight Tracking Panel -->
    <div id="flightradar-panel" class="flightradar-panel collapsed">
        <button id="flightradar-toggle" class="flightradar-toggle">
            <span class="toggle-icon">&#9992;</span>
            <span class="toggle-text">Flights</span>
        </button>
        <div class="flightradar-content">
            <div class="flightradar-header">
                <span>Live Air Traffic - Iran</span>
                <a href="https://globe.adsbexchange.com/?lat=32.43&lon=53.69&zoom=5" target="_blank" class="fr24-link">Full screen</a>
            </div>
            <iframe
                id="flightradar-iframe"
                src="about:blank"
                data-src="https://globe.adsbexchange.com/?lat=32.43&lon=53.69&zoom=5&hideSidebar&hideButtons"
                allowfullscreen
                loading="lazy">
            </iframe>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Leaflet MarkerCluster JS -->
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <script src="app.js"></script>
</body>
</html>
